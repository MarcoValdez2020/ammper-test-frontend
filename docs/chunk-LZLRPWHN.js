import{a as G,b as j,c as Y,d as H}from"./chunk-5U7TSTJ6.js";import{a as F}from"./chunk-JYKJI4XE.js";import"./chunk-76MODL46.js";import{b as T,c,d as R,e as k,f as P,g as D,h as N,i as E,j as L,l as q,m as B}from"./chunk-76FANQGY.js";import{b as U,c as z}from"./chunk-GWBNT2LM.js";import{ca as S,o as y,ta as V,ua as I,va as A,wa as O}from"./chunk-QGAU5XD6.js";import"./chunk-MD7IQKEC.js";import{$a as l,Ha as w,La as v,T as u,Wa as g,Xa as f,Y as _,Z as x,ab as i,bb as o,cb as a,fa as d,jb as h,lb as b,mb as p,va as n,vb as M,yb as m}from"./chunk-VS4GB3SB.js";function K(t,s){t&1&&(i(0,"div",5)(1,"div",6),a(2,"i",7),o(),i(3,"h1",8),m(4,"Crear Cuenta"),o(),i(5,"p",9),m(6,"Reg\xEDstrate para acceder a tus finanzas"),o()())}function Q(t,s){if(t&1&&a(0,"p-message",11),t&2){let e=p(2);l("text",e.errorMessage())}}function W(t,s){if(t&1&&a(0,"p-message",12),t&2){let e=p(2);l("text",e.successMessage())}}function X(t,s){t&1&&a(0,"p-message",19)}function Z(t,s){if(t&1){let e=h();i(0,"form",10),b("ngSubmit",function(){_(e);let C=p();return x(C.onSubmit())}),g(1,Q,1,1,"p-message",11),g(2,W,1,1,"p-message",12),i(3,"p-floatlabel"),a(4,"input",13),i(5,"label",14),m(6,"Correo electr\xF3nico"),o()(),i(7,"p-floatlabel"),a(8,"p-password",15),i(9,"label",16),m(10,"Contrase\xF1a (m\xEDnimo 8 caracteres)"),o()(),i(11,"p-floatlabel"),a(12,"p-password",17),i(13,"label",18),m(14,"Confirmar contrase\xF1a"),o()(),g(15,X,1,0,"p-message",19),a(16,"p-button",20),o()}if(t&2){let e,r=p();l("formGroup",r.registerForm),n(),f(r.errorMessage()?1:-1),n(),f(r.successMessage()?2:-1),n(2),M("ng-invalid",((e=r.registerForm.get("email"))==null?null:e.invalid)&&((e=r.registerForm.get("email"))==null?null:e.touched)),n(4),l("toggleMask",!0)("feedback",!0),n(4),l("toggleMask",!0)("feedback",!1),n(3),f(r.passwordMismatch()?15:-1),n(),l("loading",r.isLoading())("disabled",r.registerForm.invalid||r.isLoading()||r.passwordMismatch())}}function $(t,s){if(t&1){let e=h();i(0,"div",21)(1,"p",22),m(2,"\xBFYa tienes una cuenta?"),o(),i(3,"p-button",23),b("onClick",function(){_(e);let C=p();return x(C.goToLogin())}),o()()}}var J=class t{authService=u(F);router=u(y);fb=u(E);isLoading=d(!1);errorMessage=d(null);successMessage=d(null);registerForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(8)]],confirmPassword:["",[c.required]]});passwordMismatch=d(!1);constructor(){this.registerForm.get("confirmPassword")?.valueChanges.subscribe(()=>{this.checkPasswordMatch()}),this.registerForm.get("password")?.valueChanges.subscribe(()=>{this.checkPasswordMatch()})}checkPasswordMatch(){let s=this.registerForm.get("password")?.value,e=this.registerForm.get("confirmPassword")?.value;e&&s!==e?this.passwordMismatch.set(!0):this.passwordMismatch.set(!1)}onSubmit(){if(this.registerForm.valid&&!this.passwordMismatch()){this.isLoading.set(!0),this.errorMessage.set(null),this.successMessage.set(null);let s={email:this.registerForm.value.email,password:this.registerForm.value.password};this.authService.register(s).subscribe({next:()=>{this.successMessage.set("\xA1Cuenta creada exitosamente! Redirigiendo..."),setTimeout(()=>{this.router.navigate(["/banks"])},1500)},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Error al crear la cuenta. Verifica que el email no est\xE9 registrado."),console.error("Register error:",e)},complete:()=>{this.isLoading.set(!1)}})}}goToLogin(){this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-register"]],decls:6,vars:0,consts:[[1,"min-h-screen","bg-gradient-to-br","from-green-50","to-emerald-100","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-sm"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"text-center","p-6","pb-2"],[1,"w-16","h-16","bg-green-600","rounded-full","mx-auto","mb-4","flex","items-center","justify-center"],[1,"pi","pi-user-plus","text-white","text-2xl"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-600","text-sm","mt-1"],[1,"space-y-6",3,"ngSubmit","formGroup"],["severity","error",3,"text"],["severity","success",3,"text"],["id","email","type","email","pInputText","","formControlName","email",1,"w-full"],["for","email"],["id","password","formControlName","password","styleClass","w-full","inputStyleClass","w-full",3,"toggleMask","feedback"],["for","password"],["id","confirmPassword","formControlName","confirmPassword","styleClass","w-full","inputStyleClass","w-full",3,"toggleMask","feedback"],["for","confirmPassword"],["severity","warn","text","Las contrase\xF1as no coinciden"],["type","submit","label","Crear Cuenta","styleClass","w-full",3,"loading","disabled"],[1,"text-center","pt-4","border-t","border-gray-200"],[1,"text-gray-600","text-sm","mb-3"],["label","Iniciar Sesi\xF3n","severity","secondary","styleClass","w-full",3,"onClick"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"p-card"),v(3,K,7,0,"ng-template",2)(4,Z,17,12,"ng-template",3)(5,$,4,0,"ng-template",4),o()()())},dependencies:[L,P,T,R,k,D,N,I,V,S,B,q,j,G,O,A,z,U,H,Y],encapsulation:2})};export{J as RegisterComponent};
