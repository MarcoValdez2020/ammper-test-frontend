import{a as j,b as A,c as H,d as J}from"./chunk-5U7TSTJ6.js";import{a as M}from"./chunk-JYKJI4XE.js";import"./chunk-76MODL46.js";import{b as F,c as u,d as T,e as N,f as D,g as V,h as E,i as k,j as I,l as G,m as R}from"./chunk-76FANQGY.js";import{b as q,c as z}from"./chunk-GWBNT2LM.js";import{ca as L,o as w,ta as P,ua as B,va as O,wa as U}from"./chunk-QGAU5XD6.js";import"./chunk-MD7IQKEC.js";import{$a as m,Ha as C,La as v,T as d,Wa as y,Xa as h,Y as c,Z as f,ab as i,bb as n,cb as a,fa as x,jb as _,lb as b,mb as p,va as s,vb as S,yb as l}from"./chunk-VS4GB3SB.js";function Q(t,r){t&1&&(i(0,"div",5)(1,"div",6),a(2,"i",7),n(),i(3,"h1",8),l(4,"Iniciar Sesi\xF3n"),n(),i(5,"p",9),l(6,"Accede a tu cuenta bancaria"),n()())}function W(t,r){if(t&1&&a(0,"p-message",11),t&2){let e=p(2);m("text",e.errorMessage())}}function X(t,r){if(t&1){let e=_();i(0,"form",10),b("ngSubmit",function(){c(e);let g=p();return f(g.onSubmit())}),y(1,W,1,1,"p-message",11),i(2,"p-floatlabel"),a(3,"input",12),i(4,"label",13),l(5,"Correo electr\xF3nico"),n()(),i(6,"p-floatlabel"),a(7,"p-password",14),i(8,"label",15),l(9,"Contrase\xF1a"),n()(),a(10,"p-button",16),n()}if(t&2){let e,o=p();m("formGroup",o.loginForm),s(),h(o.errorMessage()?1:-1),s(2),S("ng-invalid",((e=o.loginForm.get("email"))==null?null:e.invalid)&&((e=o.loginForm.get("email"))==null?null:e.touched)),s(4),m("toggleMask",!0)("feedback",!1),s(3),m("loading",o.isLoading())("disabled",o.loginForm.invalid||o.isLoading())}}function Y(t,r){if(t&1){let e=_();i(0,"div",17)(1,"p",18),l(2,"\xBFNo tienes una cuenta?"),n(),i(3,"p-button",19),b("onClick",function(){c(e);let g=p();return f(g.goToRegister())}),n()()}}var K=class t{authService=d(M);router=d(w);fb=d(k);isLoading=x(!1);errorMessage=x(null);loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(8)]]});onSubmit(){if(this.loginForm.valid){this.isLoading.set(!0),this.errorMessage.set(null);let r=this.loginForm.value;this.authService.login(r).subscribe({next:()=>{this.router.navigate(["/banks"])},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Credenciales incorrectas. Verifica tu email y contrase\xF1a."),console.error("Login error:",e)},complete:()=>{this.isLoading.set(!1)}})}}goToRegister(){this.router.navigate(["/auth/register"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-login"]],decls:6,vars:0,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-sm"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"text-center","p-6","pb-2"],[1,"w-16","h-16","bg-blue-600","rounded-full","mx-auto","mb-4","flex","items-center","justify-center"],[1,"pi","pi-user","text-white","text-2xl"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-600","text-sm","mt-1"],[1,"space-y-6",3,"ngSubmit","formGroup"],["severity","error",3,"text"],["id","email","type","email","pInputText","","formControlName","email",1,"w-full"],["for","email"],["id","password","formControlName","password","styleClass","w-full","inputStyleClass","w-full",3,"toggleMask","feedback"],["for","password"],["type","submit","label","Iniciar Sesi\xF3n","styleClass","w-full",3,"loading","disabled"],[1,"text-center","pt-4","border-t","border-gray-200"],[1,"text-gray-600","text-sm","mb-3"],["label","Crear cuenta","severity","secondary","styleClass","w-full",3,"onClick"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"p-card"),v(3,Q,7,0,"ng-template",2)(4,X,11,8,"ng-template",3)(5,Y,4,0,"ng-template",4),n()()())},dependencies:[I,D,F,T,N,V,E,B,P,L,R,G,A,j,U,O,z,q,J,H],encapsulation:2})};export{K as LoginComponent};
